{% extends 'core/base.html' %}
{% load static %}

{% block content %}


<h1 class="container">Mantenedor de Productos</h1>
<br><br>

{% if form %}
<!-- {{ form.as_p }} -->
<form class="row g-4" method="POST" action="" enctype="multipart/form-data" id="formulario1">

  <div class="container-fluid">
    <div class="row justify-content-center">
      {% csrf_token %}
      <div class="col-sm-12 col-md-4 col-lg-4">
        <div class="col mb-3">
          {{ form.idProducto.label_tag }}
          
          {{ form.idProducto }}
        </div>
        <div class="col mb-3">
          {{ form.nombreProducto.label_tag }}
          {{ form.nombreProducto }}
        </div>
        <div class="col mb-3">
          {{ form.descripcionProducto.label_tag }}
          {{ form.descripcionProducto }}
        </div>
        <div class="col mb-3">
          {{ form.precioProducto.label_tag }}
          {{ form.precioProducto }}
        </div>
        <div class="col mb-3">
          {{ form.descuento_subscriptor.label_tag }}
          {{ form.descuento_subscriptor }}
        </div>
        <div class="col mb-3">
          {{ form.descuento_oferta.label_tag }}
          {{ form.descuento_oferta }}
        </div>

      </div>

      <div class="col-sm-12 col-md-4 col-lg-4">
        <div class="col mb-3">
          {{ form.imagenProducto.label_tag }}
          {{ form.imagenProducto }}
          {% if action == 'upd' and imagenProducto_url %}
          <img src="{{ imagenProducto_url }}" style="height: 400px;" alt="Imagen del producto" class="current-image">
          {% endif %}


        </div>
        <div class="col mb-3">
          {{ form.categoriaProducto.label_tag }}
          {{ form.categoriaProducto }}
        </div>
      </div>

      

    <div class="row" id="botones">
      <div class="col text-center">
        <input type="submit" class="btn btn-primary" id="id_guardar" value="Guardar">
        <a class="btn btn-outline-primary" href="{% url 'productos' 'ins' -1 %}">Nuevo</a>
        {% if id != '-1' %}
        <a class="btn btn-danger" href="{% url 'productos' 'del' id %}">Eliminar</a>
        {% endif %}
        {% if mesg %}
        <div id="form_message" class="alert alert-danger" role="alert">{{ mesg }}</div>
        {% endif %}
      </div>
    </div>

  </div>
</form>


{% endif %}

{% if list %}
<table class="container">
  <thead>
    <tr>
        <th>ID</th>
        <th>Categoria</th>
        <th>Nombre</th>
        <th>Descripcion</th>
        <th>Precio</th>
        <th>% Desc. Subscriptor</th>
        <th>% Desc. Oferta</th>
        <th>Imagen</th>
        <th>Editar</th>
        <th>Eliminar</th>
    </tr>
  </thead>
  <tbody>
    {% for producto in list %}
    <tr>
        <td>{{ producto.idProducto }}</td>
        <td>{{ producto.categoriaProducto }}</td>
        <td>{{ producto.nombreProducto }}</td>
        <td>{{ producto.descripcionProducto }}</td>
        <td>{{ producto.precioProducto }}</td>
        <td>{{ producto.descuento_subscriptor }}</td>
        <td>{{ producto.descuento_oferta }}</td>
        <td><img src="/media/{{ producto.imagenProducto }}" style="height: 150px;" alt=""></td>
        

        <td><a href="{% url 'productos' 'upd' producto.idProducto %}" 
            class="btn btn-primary btn-sm">Editar</a></td>
        <td><a href="{% url 'productos' 'del' producto.idProducto %}" 
            class="btn btn-danger btn-sm">Eliminar</a></td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endif %}

{% endblock %}   

